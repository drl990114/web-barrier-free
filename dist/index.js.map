{"version":3,"file":"index.js","sources":["../src/default.ts","../src/util.ts","../src/handlers.ts","../node_modules/style-inject/dist/style-inject.es.js","../src/index.ts"],"sourcesContent":["import { language } from './index'\r\n\r\nconst defaultOptions = {\r\n\r\n  // 语言\r\n  language: 'zh-CN' as language,\r\n\r\n  // 语速\r\n  rate: 1,\r\n\r\n  // 语调\r\n  pitch: 1,\r\n\r\n  // 音量\r\n  volume: 1\r\n}\r\n\r\nexport default defaultOptions\r\n","// const\r\n\r\nexport const showBarDomId = '$$wsashowbar'\r\nexport const consoleDomId = '$$wsaConsole'\r\nexport const emphasizeClassName = 'emphasizeStyle'\r\nexport const consoleClassName = 'consoleEl'\r\nexport const optionsArr: string[] = ['language', 'rate', 'pitch', 'volume']\r\n\r\nconst cnGather: IGather = {\r\n  a: '链接',\r\n  img: '图片',\r\n  nav: '链接',\r\n  close: '关闭',\r\n  continuousRead: '连读',\r\n  fingerRead: '指读',\r\n  volume: '音量',\r\n  rate: '语速'\r\n}\r\nconst enGather: IGather = {\r\n  a: 'Link',\r\n  img: 'Image',\r\n  nav: 'Link',\r\n  close: 'Close',\r\n  continuousRead: 'ContinuousRead',\r\n  fingerRead: 'FingerRead',\r\n  volume: 'Volume',\r\n  rate: 'Rate'\r\n}\r\nconst lowerCaseImgTagName = 'img'\r\nconst modes = ['finger', 'continuous']\r\n\r\n// fn\r\nexport const getGather = (language?: string): IGather => {\r\n  let gather = cnGather\r\n  if (language === 'en') {\r\n    gather = enGather\r\n  }\r\n  return gather\r\n}\r\n\r\nexport const getElText = (el: HTMLElement, language?: string): string => {\r\n  const tag = descriptionTag(el.tagName, language)\r\n  const notContainChildText = getNotContainChildText(el)\r\n  const text =\r\n    tag !== null ? `${tag}: ${notContainChildText}` : notContainChildText\r\n  return text\r\n}\r\n\r\nexport const descriptionTag = (\r\n  tagName: string,\r\n  language?: string\r\n): string | null => {\r\n  const tag = tagName.toLowerCase()\r\n  const gather = getGather(language)\r\n  return gather[tag] !== undefined ? gather[tag] : null\r\n}\r\n\r\nexport const getNotContainChildText = (el: HTMLElement): string => {\r\n  if (el.tagName.toLowerCase() === lowerCaseImgTagName) {\r\n    return (el as HTMLImageElement).alt\r\n  }\r\n  const notContainChildText: string = Array.prototype.filter\r\n    .call(el.childNodes, (node: { nodeType: number }) => node.nodeType === 3)\r\n    .map((node) => node.nodeValue.trim())\r\n    .join('')\r\n  return notContainChildText\r\n}\r\n\r\nexport const testReadMode = (mode: string): boolean => {\r\n  return Array.prototype.includes.call(modes, mode)\r\n}\r\n\r\nexport interface IGather {\r\n  a: string\r\n  img: string\r\n  nav: string\r\n  close: string\r\n  continuousRead: string\r\n  fingerRead: string\r\n  volume: string\r\n  rate: string\r\n}\r\n","import Wbf from './index'\r\nimport { getElText, getNotContainChildText, showBarDomId } from './util'\r\n\r\nconst overHandler = (\r\n  e: { target: HTMLElement },\r\n  wbf: Wbf\r\n): void => {\r\n  const notContainChildText = getNotContainChildText(e.target)\r\n  if (notContainChildText.length === 0) return\r\n  if (e.target !== document.body && e.target.tagName.toLowerCase() !== 'html' &&\r\n  e.target.id !== showBarDomId) {\r\n    wbf.emphasize(e.target)\r\n    const text = getElText(e.target, wbf.language)\r\n    wbf.readMode === 'finger' && wbf.playAudio(text)\r\n\r\n    if (wbf.showBarEl != null) {\r\n      if (text.length > 150) {\r\n        wbf.showBarEl.style.fontSize = '24px'\r\n      } else if (text.length > 100) {\r\n        wbf.showBarEl.style.fontSize = '26px'\r\n      } else if (text.length > 50) {\r\n        wbf.showBarEl.style.fontSize = '28px'\r\n      } else if (text.length > 20) {\r\n        wbf.showBarEl.style.fontSize = '30px'\r\n      } else {\r\n        wbf.showBarEl.style.fontSize = '32px'\r\n      }\r\n      wbf.showBarEl.innerText = text\r\n    }\r\n  }\r\n}\r\n\r\nconst outHandler = (e: { target: HTMLElement }, wbf): void => {\r\n  wbf.removeEmphasize(e.target)\r\n}\r\nexport { overHandler, outHandler }\r\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import defaultOptions from './default'\r\nimport {\r\n  consoleClassName,\r\n  consoleDomId,\r\n  emphasizeClassName,\r\n  getGather,\r\n  IGather,\r\n  optionsArr,\r\n  showBarDomId,\r\n  testReadMode\r\n} from './util'\r\nimport { outHandler, overHandler } from './handlers'\r\nimport './index.css'\r\n\r\nclass Wbf {\r\n  public readMode: readMode = 'finger'\r\n  public language: language\r\n  public rate: number\r\n  public pitch: number\r\n  public volume: number\r\n  public showBarEl: HTMLDivElement | null = null\r\n  public needConsole: boolean = true\r\n  public externalFn: Function | null = null\r\n  private readonly overHandler\r\n  private readonly outHandler\r\n\r\n  constructor (options?: Options) {\r\n    if (options == null) options = defaultOptions\r\n    options?.readMode !== undefined && (this.readMode = options.readMode)\r\n    options?.needConsole !== undefined &&\r\n      (this.needConsole = options.needConsole)\r\n    this.language = options?.language ?? defaultOptions.language\r\n    this.rate = options?.rate ?? defaultOptions.rate\r\n    this.pitch = options?.pitch ?? defaultOptions.pitch\r\n    this.volume = options?.volume ?? defaultOptions.volume\r\n    this.externalFn = options?.externalFn ?? null\r\n    this.overHandler = (e: { target: HTMLElement }) => overHandler(e, this)\r\n    this.outHandler = (e: { target: HTMLElement }) => outHandler(e, this)\r\n  }\r\n\r\n  open (): void {\r\n    this.changeMode(this.readMode)\r\n    this.needConsole && this.createConsole()\r\n  }\r\n\r\n  close (): void {\r\n    const emphasizeEls = document.querySelectorAll(`.${emphasizeClassName}`)\r\n    emphasizeEls.forEach((el) => {\r\n      this.removeEmphasize(el)\r\n    })\r\n    speechSynthesis.cancel()\r\n    document.removeEventListener('mouseover', this.overHandler)\r\n    document.removeEventListener('mouseout', this.outHandler)\r\n    this.removeShowBarDom()\r\n    this.removeConsole()\r\n  }\r\n\r\n  changeOptions (keyName: string, value): void {\r\n    if (optionsArr.includes[keyName] === false && this[keyName] !== undefined) {\r\n      throw new Error(`${keyName} options do not exist on wbf`)\r\n    }\r\n    if (typeof value === 'number') {\r\n      value >= 2 && (value = 2)\r\n    }\r\n    this[keyName] = value\r\n  }\r\n\r\n  changeMode (readMode: readMode): void {\r\n    if (!testReadMode(readMode)) {\r\n      throw new Error(`readMode not includes this ${readMode}`)\r\n    }\r\n    this.readMode = readMode\r\n    if (readMode !== 'finger') {\r\n      const allText = document.body.innerText\r\n      this.playAudio(allText)\r\n    }\r\n    this.addHandler()\r\n  }\r\n\r\n  addHandler (): void {\r\n    if (this.showBarEl == null) {\r\n      const showBar = this.createShowBarDom()\r\n      this.showBarEl = showBar\r\n    }\r\n\r\n    document.addEventListener('mouseover', this.overHandler)\r\n    document.addEventListener('mouseout', this.outHandler)\r\n  }\r\n\r\n  createUtterance (str): SpeechSynthesisUtterance {\r\n    const msg = new SpeechSynthesisUtterance()\r\n    msg.text = str\r\n    msg.lang = this.language\r\n    msg.pitch = this.pitch\r\n    msg.rate = this.rate\r\n    msg.volume = this.volume\r\n    return msg\r\n  }\r\n\r\n  playAudio (str: string): SpeechSynthesisUtterance | undefined {\r\n    if (this.externalFn != null) {\r\n      this.externalFn(str)\r\n    } else {\r\n      speechSynthesis.cancel()\r\n      const msg = this.createUtterance(str)\r\n      speechSynthesis.speak(msg)\r\n      return msg\r\n    }\r\n  }\r\n\r\n  emphasize (el: HTMLElement | Element): void {\r\n    el.classList.add(emphasizeClassName)\r\n  }\r\n\r\n  removeEmphasize (el: HTMLElement | Element): void {\r\n    el.classList.remove(emphasizeClassName)\r\n  }\r\n\r\n  createShowBarDom (): HTMLDivElement {\r\n    const prev = document.getElementById(showBarDomId) as HTMLDivElement | null\r\n    if (prev != null) return prev\r\n    const showBar = document.createElement('div')\r\n    showBar.id = showBarDomId\r\n    showBar.style.position = 'fixed'\r\n    showBar.style.bottom = '0px'\r\n    showBar.style.left = '0px'\r\n    showBar.style.width = '100%'\r\n    showBar.style.minHeight = '50px'\r\n    showBar.style.maxHeight = '300px'\r\n    showBar.style.fontWeight = 'bold'\r\n    showBar.style.textAlign = 'center'\r\n    showBar.style.wordBreak = 'break-word;'\r\n    showBar.style.overflow = 'hidden'\r\n    showBar.style.background = 'white'\r\n    showBar.style.border = '2px solid #eee'\r\n\r\n    document.body.appendChild(showBar)\r\n    return showBar\r\n  }\r\n\r\n  createConsole (): void {\r\n    const prev = document.getElementById(consoleDomId)\r\n    if (prev != null) return\r\n    const consoleEl = document.createElement('div')\r\n    consoleEl.id = consoleDomId\r\n    const gather: IGather = getGather(this.language)\r\n    consoleEl.classList.add(consoleClassName)\r\n    consoleEl.innerHTML = `\r\n    <div class=\"${consoleClassName}-main\">\r\n      <div>\r\n        <button id=\"_wbfClose\">${gather.close}</button>\r\n        <button id=\"_wbfContinuousRead\">${gather.continuousRead}</button>\r\n        <button id=\"_wbfFingerRead\">${gather.fingerRead}</button> \r\n      </div>\r\n        |\r\n        <div>\r\n        ${gather.volume}\r\n          <button id=\"_wbfAddVolume\">+</button>\r\n          <button id=\"_wbfReduceVolume\">-</button>\r\n        </div>\r\n        |\r\n        <div>\r\n        ${gather.rate}\r\n          <button id=\"_wbfAddRate\">+</button>\r\n          <button id=\"_wbfReduceRate\">-</button>\r\n        </div>\r\n    </div>`\r\n\r\n    document.body.insertBefore(consoleEl, document.body.firstChild)\r\n    const closeBtn = document.getElementById('_wbfClose')\r\n    const continuousReadBtn = document.getElementById('_wbfContinuousRead')\r\n    const fingerReadBtn = document.getElementById('_wbfFingerRead')\r\n    const addVolumeBtn = document.getElementById('_wbfAddVolume')\r\n    const reduceVolumeBtn = document.getElementById('_wbfReduceVolume')\r\n    const addRateBtn = document.getElementById('_wbfAddRate')\r\n    const reduceRateBtn = document.getElementById('_wbfReduceRate')\r\n\r\n    closeBtn != null && (closeBtn.onclick = () => this.close())\r\n    continuousReadBtn != null &&\r\n      (continuousReadBtn.onclick = () => this.changeMode('continuous'))\r\n    fingerReadBtn != null &&\r\n      (fingerReadBtn.onclick = () => this.changeMode('finger'))\r\n    addVolumeBtn != null &&\r\n      (addVolumeBtn.onclick = () => this.changeOptions('volume', ++this.volume))\r\n    reduceVolumeBtn != null &&\r\n      (reduceVolumeBtn.onclick = () =>\r\n        this.changeOptions('volume', --this.volume))\r\n    addRateBtn != null &&\r\n      (addRateBtn.onclick = () => this.changeOptions('rate', ++this.rate))\r\n    reduceRateBtn != null &&\r\n      (reduceRateBtn.onclick = () => this.changeOptions('rate', --this.rate))\r\n  }\r\n\r\n  removeConsole (): void {\r\n    const consoleEl = document.getElementById(consoleDomId)\r\n    if (consoleEl != null) {\r\n      consoleEl.remove()\r\n    }\r\n  }\r\n\r\n  removeShowBarDom (): void {\r\n    if (this.showBarEl != null) {\r\n      this.showBarEl.remove()\r\n      this.showBarEl = null\r\n    }\r\n  }\r\n}\r\n\r\ntype readMode = 'finger' | 'continuous'\r\nexport type language = 'en' | 'zh-CN'\r\ninterface Options {\r\n  readMode?: readMode\r\n  language?: language\r\n  rate?: number\r\n  pitch?: number\r\n  externalFn?: Function\r\n  volume?: number\r\n  needConsole?: boolean\r\n}\r\n\r\nexport default Wbf\r\n"],"names":[],"mappings":"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"}